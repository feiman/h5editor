<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
    <title>PoPo</title>
    <link rel="stylesheet" type="text/css" href="mainWorld.css">
</head>
<body class="window">
<div class="titleDiv">
    <ul id="titleUl">
        <ul>
            <label>hello world</label>
        </ul>
        <ul>
            <button>移动</button>
            <label></label>
            <button>翻转</button>
            <label></label>
            <button>缩放</button>
            <label></label>
            <button>编辑</button>
        </ul>
    </ul>

</div>
<p id="text"></p>
    <button id='openDevButton'>openDevTool</button>
    <script>
        $(document).ready(function () {
            const electron = require("electron");
            const {ipcRenderer} = electron;
            var labelBtn = $("#warp").find('label');
            var _isDargging = false;
            var inx;
            var warpWidth = $("#warp").width();
            $('#openDevButton').click(function(){
                console.log("open dev button");
                ipcRenderer.send("open_dev_tool");
            });

            $(labelBtn).bind('mousedown', function () {
                console.log("mouse down");
                _isDargging = true;
                inx = $(this).index('label');
                $('#text').text('点击的label=' + inx);

            });
            document.onmousemove = function (e) {
                if (_isDargging){
                    let clickX = e.pageX;
                    labelBtn.eq(inx).css('left',clickX + 'px');
                    console.log("label width = " + labelBtn.eq(inx).width());
                    if (inx === 0){
                        if (labelBtn.eq(inx).offset().left < 5){
                            labelBtn.css('left', 5 + 'px');
                        }
                        if ((labelBtn.eq(inx).offset().left + labelBtn.eq(inx).width())> labelBtn.eq(inx + 1).offset().left){
                            console.log("超过了右边label");
                            labelBtn.eq(inx).css('left', labelBtn.eq(inx + 1).offset().left - labelBtn.eq(inx).width() + 'px');
                        }
                        labelBtn.eq(inx).prev().width(labelBtn.eq(inx).offset().left + 'px');
                        console.log("inx 1 left = " + labelBtn.eq(inx + 1).offset().left);
                        labelBtn.eq(inx).next().width((labelBtn.eq(inx + 1).offset().left - labelBtn.eq(inx).offset().left) + 'px');
                    }else if (inx === 1){
                        if (labelBtn.eq(inx).offset().left < labelBtn.eq(inx - 1).offset().left + labelBtn.eq(inx - 1).width()){
                            labelBtn.eq(inx).css('left',labelBtn.eq(inx - 1).offset().left + labelBtn.eq(inx - 1).width() + 'px');
                        }

                        labelBtn.eq(inx).prev().width(labelBtn.eq(inx).offset().left - labelBtn.eq(inx - 1).offset().left + 'px');
                        labelBtn.eq(inx).next().width(warpWidth - labelBtn.eq(inx).offset().left + 'px');
                    }
                }
            };
            $(document).mouseup(function () {
                _isDargging = false
            });

        });




    </script>



<div id="warp">
    <ul>
        <li class="li1"></li>
        <label class="l1">1</label>
        <li class="li2"></li>
        <label class="l2">2</label>
        <li class="li3"></li>
    </ul>
</div>
</body>
</html>